<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <!-- @version $Revision: $ $Date: $ $Author: $ $State: $ -->
    <!-- @formatter:off -->
    <parent>
        <artifactId>sample</artifactId>
        <groupId>com.nabla.project.servers.sample</groupId>
        <version>1.0.1-SNAPSHOT</version>
    </parent>

    <groupId>com.nabla.project.servers.sample</groupId>
    <artifactId>bower-sample</artifactId>
    <version>1.0.1-SNAPSHOT</version>
    <packaging>war</packaging>
    <name>Nabla Bower Sample</name>
    <description>Bower sample components</description>
    <url>https://github.com/AlbanAndrieu/nabla-servers-bower-sample</url>

    <scm>
        <connection>scm:git:git://github.com/AlbanAndrieu/nabla-servers-bower-sample.git</connection>
        <developerConnection>scm:git:git@github.com:AlbanAndrieu/nabla-servers-bower-sample.git</developerConnection>
        <url>https://github.com/AlbanAndrieu/nabla-servers-bower-sample</url>
        <tag>HEAD</tag>        
    </scm>
    
    <issueManagement>
        <system>GitHub Issues</system>
        <url>https://github.com/AlbanAndrieu/nabla-servers-bower/issues</url>
    </issueManagement>
    <ciManagement>
        <system>Jenkins</system>
        <url>${JOB_URL}</url>
    </ciManagement>

    <!--TODO see jetty demo-base code at https://github.com/eclipse/jetty.project/blob/master/tests/test-webapps/test-jetty-webapp/pom.xml -->
    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <sonar.sourceEncoding>UTF-8</sonar.sourceEncoding>

        <org.umlgraph.umlgraph.version>5.6.6</org.umlgraph.umlgraph.version>
        <groovy.eclipse.compiler.version>3.4.0-01</groovy.eclipse.compiler.version>
        <groovy.eclipse.batch.version>2.5.7-01</groovy.eclipse.batch.version>
        <maven.gmavenplus.plugin.version>1.8.1</maven.gmavenplus.plugin.version>

        <maven.frontend.plugin.version>1.7.5</maven.frontend.plugin.version>
        <maven.dependency.check.plugin.version>5.2.4</maven.dependency.check.plugin.version>
        <maven.cargo.maven2.plugin.version>1.7.5</maven.cargo.maven2.plugin.version>
        <maven.dependency.plugin.version>3.1.1</maven.dependency.plugin.version>
        <maven.shade.plugin.version>3.2.1</maven.shade.plugin.version>
        <maven.bundle.plugin.version>4.2.0</maven.bundle.plugin.version>
        <maven.javadoc.plugin.version>2.10.3</maven.javadoc.plugin.version>
        <maven.tomcat7.plugin.version>2.2</maven.tomcat7.plugin.version>
        <maven.sonar.plugin.version>3.6.0.1398</maven.sonar.plugin.version>
        <maven.sortpom.plugin.version>2.8.0</maven.sortpom.plugin.version>
        <maven.compiler.plugin.version>3.8.1</maven.compiler.plugin.version>
        <maven.toolchains.plugin.version>3.0.0</maven.toolchains.plugin.version>
        <maven.pitest.plugin.version>1.4.9</maven.pitest.plugin.version>
        <maven.jetty.eclipse.plugin.version>${jetty9.version}</maven.jetty.eclipse.plugin.version>
        <maven.site.plugin.version>3.7.1</maven.site.plugin.version>
        <maven.javadoc.plugin.version>2.10.4</maven.javadoc.plugin.version>
        <maven.resources.plugin.version>3.1.0</maven.resources.plugin.version>
        <maven.nexus.staging.plugin.version>1.6.8</maven.nexus.staging.plugin.version>
        <maven.clean.plugin.version>3.1.0</maven.clean.plugin.version>
        <maven.surefire.plugin.version>2.22.2</maven.surefire.plugin.version>
        <maven.failsafe.plugin.version>${maven.surefire.plugin.version}</maven.failsafe.plugin.version>
        <maven.exec.plugin.version>1.6.0</maven.exec.plugin.version>
        <maven.war.plugin.version>2.4</maven.war.plugin.version>
        <maven.build.helper.plugin.version>3.0.0</maven.build.helper.plugin.version>
        <maven.lifecycle.mapping.version>1.0.0</maven.lifecycle.mapping.version>
        <maven.project.info.reports.plugin.version>3.0.0</maven.project.info.reports.plugin.version>
        <maven.jarsigner.plugin.version>3.0.0</maven.jarsigner.plugin.version>
        <maven.git.commit.id.plugin.version>2.2.4</maven.git.commit.id.plugin.version>
        <maven.dockerfile.plugin.version>1.4.4</maven.dockerfile.plugin.version>
        <maven.fabric8.docker.plugin.version>0.26.1</maven.fabric8.docker.plugin.version>
        <maven.assembly.plugin.version>3.1.1</maven.assembly.plugin.version>
        <maven.spotbugs.plugin.version>3.1.12</maven.spotbugs.plugin.version>
        <maven.jenkinsfile.plugin.version>1.0.1</maven.jenkinsfile.plugin.version>
        <maven.zkm.plugin.version>1.0.3</maven.zkm.plugin.version>
        <maven.zkm.version>12.0.0</maven.zkm.version>
        <maven.fabric8-docker-maven.plugin.version>0.30.0</maven.fabric8-docker-maven.plugin.version>
        <maven.git-commit-id.plugin.version>3.0.0</maven.git-commit-id.plugin.version>
        <maven.buildnumber.plugin.version>1.4</maven.buildnumber.plugin.version>
        <maven.javafx.plugin.version>8.8.3</maven.javafx.plugin.version>
        <maven.jaxrs.analyzer.plugin.version>0.16</maven.jaxrs.analyzer.plugin.version>

        <com.oracle.javafx.version>2.2.3</com.oracle.javafx.version>
        <testcontainers.version>1.9.1</testcontainers.version>
        <docker.compose.version>0.9.9</docker.compose.version>

        <!--<node.version>9.3.0</node.version> FreeNas -->
        <!--<node.version>8.9.3</node.version> NOK -->
        <!--<node.version>7.8.0</node.version> Ubuntu -->
        <node.version>v11.12.0</node.version>
        <npm.version>6.10.3</npm.version>
        <yarn.version>1.12.3</yarn.version>

        <jmockit.version>1.19</jmockit.version>
        <junit.version>4.12</junit.version>
        <groovy.version>2.4.12</groovy.version>
        <guava.version>23.3-jre</guava.version>
        <guice.version>4.1.0</guice.version>
        <jersey.version>2.28</jersey.version>
        <jersey.bom.version>${jersey.version}</jersey.bom.version>
        <slf4j.version>1.7.13</slf4j.version>
        <log4j.version>1.2.17</log4j.version>
        <log4j.core.version>2.13.0</log4j.core.version>
        <logback.version>1.0.13</logback.version>
        <jsr305.version>2.0.1</jsr305.version>
        <http.builder.version>0.6</http.builder.version>
        <javax.servlet.api.version>4.0.1</javax.servlet.api.version>
        <javax.jsp.api.version>2.0</javax.jsp.api.version>
        <doxia.core.version>1.8</doxia.core.version>
        <doxia.version>1.8.1</doxia.version>
        <jetty.runner.version>${jetty9.version}</jetty.runner.version>

        <!--
        <javax.ws.rs-api.version>2.0</javax.ws.rs-api.version>
        <validation.api.version>1.1.0.Final</validation.api.version>
        -->

        <jetty9.version>9.4.28.v20200408</jetty9.version>
        <jetty.ssl.port>9443</jetty.ssl.port>
        <!-- 9443 is used by zap see jetty-ssl.xml in src/main/config/demo-base/etc -->
        <cargo.protocol>http</cargo.protocol>
        <cargo.monitoring.jmx.rmi.port>10088</cargo.monitoring.jmx.rmi.port>
        <jetty.jmxremote.rmihost>localhost</jetty.jmxremote.rmihost>
        <jetty.jmxremote.rmiport>3099</jetty.jmxremote.rmiport>
        <cargo.jetty.jmx.activation>-Dcom.sun.management.jmxremote
            -Dcom.sun.management.jmxremote.ssl=false
            -Dcom.sun.management.jmxremote.authenticate=false
            -Dcom.sun.management.jmxremote.port=${cargo.monitoring.jmx.rmi.port}
            -Djetty.jmxrmihost=${jetty.jmxremote.rmiserverhost}
            -Djetty.jmxrmiport=${jetty.jmxremote.rmiserverport}</cargo.jetty.jmx.activation>
        <cargo.jmx.activation>${cargo.jetty.jmx.activation}</cargo.jmx.activation>
        <documentation.output.directory>${basedir}/docs</documentation.output.directory>
        <groovydoc.directory.name>groovydocs</groovydoc.directory.name>
    </properties>
    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>org.glassfish.jersey</groupId>
                <artifactId>jersey-bom</artifactId>
                <version>${jersey.bom.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
            <dependency>
                <groupId>org.codehaus.groovy</groupId>
                <artifactId>groovy-all</artifactId>
                <version>${groovy.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
        </dependencies>
    </dependencyManagement>
    <dependencies>
        <!--
        <dependency>
                <groupId>com.sun.faces</groupId>
                <artifactId>jsf-api</artifactId>
                <scope>${scope.tomcat.never.type}</scope>
        </dependency>
        <dependency>
                <groupId>com.sun.faces</groupId>
                <artifactId>jsf-impl</artifactId>
                <scope>${scope.tomcat.never.type}</scope>
        </dependency>
        -->
        <dependency>
            <groupId>org.glassfish.jersey.core</groupId>
            <artifactId>jersey-server</artifactId>
        </dependency>
        <dependency>
            <groupId>org.glassfish.jersey.containers</groupId>
            <artifactId>jersey-container-servlet-core</artifactId>
        </dependency>
        <dependency>
            <groupId>org.glassfish.jersey.containers</groupId>
            <artifactId>jersey-container-jetty-http</artifactId>
        </dependency>
        <dependency>
            <groupId>org.glassfish.jersey.media</groupId>
            <artifactId>jersey-media-moxy</artifactId>
        </dependency>
        <!--  Jersey Client required for test *and runtime* due to Jersey bug : https://java.net/jira/browse/JERSEY-2104 -->
        <!-- This dependency can be scoped to test when Jersey is upgraded to >=2.4 -->
        <dependency>
            <groupId>org.glassfish.jersey.core</groupId>
            <artifactId>jersey-client</artifactId>
            <!--<scope>test</scope> -->
        </dependency>
         <dependency>
             <groupId>org.glassfish.jersey.inject</groupId>
             <artifactId>jersey-hk2</artifactId>
             <version>${jersey.version}</version>
         </dependency>
        <dependency>
            <groupId>org.codehaus.groovy</groupId>
            <artifactId>groovy</artifactId>
            <version>${groovy.version}</version>
        </dependency>
        <dependency>
            <groupId>org.codehaus.groovy</groupId>
            <artifactId>groovy-test</artifactId>
            <version>${groovy.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.codehaus.groovy.modules.http-builder</groupId>
            <artifactId>http-builder</artifactId>
            <version>${http.builder.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${slf4j.version}</version>
            <exclusions>
                <!-- circular dependency -->
                <exclusion>
                    <artifactId>logback-classic</artifactId>
                    <groupId>ch.qos.logback</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>javax.servlet-api</artifactId>
            <version>${javax.servlet.api.version}</version>
            <scope>provided</scope>
            <!-- javax.servlet-api-3.0.1.jar Offending class javax/servlet/Servlet.class  in Tomcat -->
        </dependency>

        <dependency>
            <groupId>com.google.guava</groupId>
            <artifactId>guava</artifactId>
            <version>${guava.version}</version>
        </dependency>
        <dependency>
            <groupId>com.google.code.findbugs</groupId>
            <artifactId>jsr305</artifactId>
            <version>${jsr305.version}</version>
            <optional>true</optional>
            <!-- needed only for annotations -->
        </dependency>
        <!-- test dependencies -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>${junit.version}</version>
            <scope>test</scope>
        </dependency>
        <!-- jmockit musr be after junit in the classpath -->
        <dependency>
            <groupId>org.jmockit</groupId>
            <artifactId>jmockit</artifactId>
            <version>${jmockit.version}</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
    <build>
        <finalName>test</finalName>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.eclipse.m2e</groupId>
                    <artifactId>lifecycle-mapping</artifactId>
                    <version>${maven.lifecycle.mapping.version}</version>
                    <configuration>
                        <lifecycleMappingMetadata>
                            <pluginExecutions>
                                <pluginExecution>
                                    <pluginExecutionFilter>
                                        <groupId>org.owasp</groupId>
                                        <artifactId>dependency-check-maven</artifactId>
                                        <versionRange>[0.0,)</versionRange>
                                        <goals>
                                            <goal>check</goal>
                                        </goals>
                                    </pluginExecutionFilter>
                                    <action>
                                        <ignore></ignore>
                                    </action>
                                </pluginExecution>
                                <pluginExecution>
                                    <pluginExecutionFilter>
                                        <groupId>com.github.eirslett</groupId>
                                        <artifactId>frontend-maven-plugin</artifactId>
                                        <versionRange>[0.0,)</versionRange>
                                        <goals>
                                            <goal>install-node-and-npm</goal>
                                            <goal>npm</goal>
                                            <goal>grunt</goal>
                                        </goals>
                                    </pluginExecutionFilter>
                                    <action>
                                        <ignore></ignore>
                                    </action>
                                </pluginExecution>
                                <pluginExecution>
                                    <pluginExecutionFilter>
                                        <groupId>org.jacoco</groupId>
                                        <artifactId>jacoco-maven-plugin</artifactId>
                                        <versionRange>[0.0,)</versionRange>
                                        <goals>
                                            <goal>prepare-agent</goal>
                                        </goals>
                                    </pluginExecutionFilter>
                                    <action>
                                        <ignore></ignore>
                                    </action>
                                </pluginExecution>
                                <pluginExecution>
                                    <pluginExecutionFilter>
                                        <groupId>org.apache.felix</groupId>
                                        <artifactId>maven-bundle-plugin</artifactId>
                                        <versionRange>[0.0,)</versionRange>
                                        <goals>
                                            <goal>manifest</goal>
                                        </goals>
                                    </pluginExecutionFilter>
                                    <action>
                                        <ignore></ignore>
                                    </action>
                                </pluginExecution>
                                <pluginExecution>
                                    <pluginExecutionFilter>
                                        <groupId>org.codehaus.mojo</groupId>
                                        <artifactId>exec-maven-plugin</artifactId>
                                        <versionRange>[0.0,)</versionRange>
                                        <goals>
                                            <goal>exec</goal>
                                        </goals>
                                    </pluginExecutionFilter>
                                    <action>
                                        <ignore></ignore>
                                    </action>
                                </pluginExecution>
                            </pluginExecutions>
                        </lifecycleMappingMetadata>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-assembly-plugin</artifactId>
                    <version>${maven.assembly.plugin.version}</version>
                    <dependencies>
                        <dependency>
                            <groupId>org.eclipse.jetty.toolchain</groupId>
                            <artifactId>jetty-assembly-descriptors</artifactId>
                            <version>1.0</version>
                        </dependency>
                    </dependencies>
                </plugin>
                <plugin>
                  <groupId>com.github.spotbugs</groupId>
                  <artifactId>spotbugs-maven-plugin</artifactId>
                  <version>${maven.spotbugs.plugin.version}</version>
                    <dependencies>
                      <!-- overwrite dependency on spotbugs if you want to specify the version of spotbugs -->
                      <dependency>
                        <groupId>com.github.spotbugs</groupId>
                        <artifactId>spotbugs</artifactId>
                        <version>${maven.spotbugs.plugin.version}</version>
                      </dependency>
                    </dependencies>
                    <configuration>
                        <effort>Max</effort>
                        <threshold>Low</threshold>
                        <failOnError>true</failOnError>
                        <includeFilterFile>${session.executionRootDirectory}/spotbugs-security-include.xml</includeFilterFile>
                        <excludeFilterFile>${session.executionRootDirectory}/spotbugs-security-exclude.xml</excludeFilterFile>
                        <plugins>
                            <plugin>
                                <groupId>com.h3xstream.findsecbugs</groupId>
                                <artifactId>findsecbugs-plugin</artifactId>
                                <version>LATEST</version>
                            </plugin>
                        </plugins>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>com.github.ekryd.sortpom</groupId>
                    <artifactId>sortpom-maven-plugin</artifactId>
                    <version>${maven.sortpom.plugin.version}</version>
                    <configuration>
                        <lineSeparator>\n</lineSeparator>
                        <encoding>${project.build.sourceEncoding}</encoding>
                        <sortProperties>true</sortProperties>
                        <keepBlankLines>true</keepBlankLines>
                        <nrOfIndentSpace>-1</nrOfIndentSpace>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.owasp</groupId>
                    <artifactId>dependency-check-maven</artifactId>
                    <version>${maven.dependency.check.plugin.version}</version>
                    <configuration>
                        <format>XML</format>
                        <skipProvidedScope>true</skipProvidedScope>
                        <skipRuntimeScope>true</skipRuntimeScope>
                        <skipSystemScope>true</skipSystemScope>
                        <assemblyAnalyzerEnabled>false</assemblyAnalyzerEnabled>
                        <centralAnalyzerEnabled>false</centralAnalyzerEnabled>
                        <nexusAnalyzerEnabled>false</nexusAnalyzerEnabled>
            <!--
                        <cveUrl12Modified>http://albandrieu.com/download/nist/nvdcve-Modified.xml.gz</cveUrl12Modified>
                        <cveUrl20Modified>http://albandrieu.com/download/nist/nvdcve-2.0-Modified.xml.gz</cveUrl20Modified>
                        <cveUrl12Base>http://albandrieu.com/download/nist/nvdcve-%d.xml</cveUrl12Base>
                        <cveUrl20Base>http://albandrieu.com/download/nist/nvdcve-2.0-%d.xml</cveUrl20Base>
            -->
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-project-info-reports-plugin</artifactId>
                    <version>${maven.project.info.reports.plugin.version}</version>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-site-plugin</artifactId>
                    <version>${maven.site.plugin.version}</version>
                    <dependencies>
                        <dependency>
                            <groupId>org.apache.maven.doxia</groupId>
                            <artifactId>doxia-core</artifactId>
                            <version>${doxia.core.version}</version>
                        </dependency>
                        <dependency>
                            <groupId>org.apache.maven.doxia</groupId>
                            <artifactId>doxia-site-renderer</artifactId>
                            <version>${doxia.version}</version>
                        </dependency>
                    </dependencies>
                    <configuration>
                        <encoding>${project.build.sourceEncoding}</encoding>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-jarsigner-plugin</artifactId>
                    <version>${maven.jarsigner.plugin.version}</version>
                    <executions>
                        <execution>
                            <id>verify</id>
                            <goals>
                                <goal>verify</goal>
                            </goals>
                        </execution>
                    </executions>
                    <configuration>
                        <!--<verbose>true</verbose>-->
                        <certs>true</certs>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-clean-plugin</artifactId>
                <version>${maven.clean.plugin.version}</version>
                <configuration>
                    <filesets>
                        <fileset>
                            <directory>${project.basedir}</directory>
                            <includes>
                                <!--
                                <include>.bower/</include>
                                <include>.node_cache/</include>
                                <include>.node_tmp/</include>
                                <include>.tmp/</include>
                                <include>.sass-cache/</include>
                                <include>node_modules/</include>
                                <include>node/</include>
                                -->
                                <include>bower_components/</include>
                                <!-- bower install is not installing bower_components/angular/angular.js properly -->
                                <include>lib/</include>
                                <include>docs/</include>
                                <include>dist/</include>
                                <!--<include>build/</include> -->
                            </includes>
                            <excludes>
                                <!-- Allow mvn clean install > install.log -->
                                <exclude>**/build.log</exclude>
                                <exclude>**/install.log</exclude>
                            </excludes>
                            <followSymlinks>false</followSymlinks>
                        </fileset>
                    </filesets>
                </configuration>
            </plugin>
            <plugin>
                <groupId>com.sebastian-daschner</groupId>
                <artifactId>jaxrs-analyzer-maven-plugin</artifactId>
                <version>${maven.jaxrs.analyzer.plugin.version}</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>analyze-jaxrs</goal>
                        </goals>
                        <configuration>
                            <backend>plaintext</backend>
                            <deployedDomain>localhost</deployedDomain>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
           <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>${maven.exec.plugin.version}</version>
                <executions>
                    <execution>
                        <id>exec-npm-install</id>
                        <phase>generate-sources</phase>
                        <configuration>
                            <executable>npm</executable>
                            <arguments>
                                <argument>install</argument>
                            </arguments>
                        </configuration>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>exec-bower-install</id>
                        <phase>generate-sources</phase>
                        <configuration>
                            <executable>bower</executable>
                            <arguments>
                                <argument>install</argument>
                                <argument>--allow-root</argument>
                            </arguments>
                        </configuration>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>exec-grunt-prepare</id>
                        <phase>generate-resources</phase>
                        <configuration>
                            <executable>grunt</executable>
                            <arguments>
                                <argument>prepare</argument>
                            </arguments>
                        </configuration>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>exec-grunt-check</id>
                        <phase>process-resources</phase>
                        <configuration>
                            <executable>grunt</executable>
                            <arguments>
                                <argument>check</argument>
                            </arguments>
                        </configuration>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>exec-grunt-default</id>
                        <phase>compile</phase>
                        <configuration>
                            <executable>grunt</executable>
                            <arguments>
                                <argument>default</argument>
                                <argument>--skipTests=${maven.test.skip}</argument>
                            </arguments>
                        </configuration>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                    </execution>
                    <!--
                    <execution>
                        <id>exec-grunt-integration-test</id>
                        <phase>integration-test</phase>
                        <configuration>
                            <executable>grunt</executable>
                            <arguments>
                                <argument>integration-test</argument>
                            </arguments>
                        </configuration>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                    </execution>
                    -->
                    <execution>
                        <id>exec-grunt-site</id>
                        <phase>site</phase>
                        <configuration>
                            <executable>grunt</executable>
                            <arguments>
                                <argument>site</argument>
                            </arguments>
                        </configuration>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <skip>${maven.exec.skip}</skip>
                    <environmentVariables>
                        <!-- The following parameters create an NPM sandbox for CI -->
                        <NPM_CONFIG_PREFIX>${basedir}/npm</NPM_CONFIG_PREFIX>
                        <NPM_CONFIG_CACHE>${NPM_CONFIG_PREFIX}/cache</NPM_CONFIG_CACHE>
                        <NPM_CONFIG_TMP>${project.build.directory}/npmtmp</NPM_CONFIG_TMP>
                    </environmentVariables>
                </configuration>
            </plugin>
            <!--
            <plugin>
                <groupId>com.github.eirslett</groupId>
                <artifactId>frontend-maven-plugin</artifactId>
                <version>${maven.frontend.plugin.version}</version>
                <executions>
                    -->
                    <!--install \-\-no-optional
                    <execution>
                        <id>install node and npm</id>
                        <phase>generate-sources</phase>
                        <goals>
                            <goal>install-node-and-npm</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>npm install</id>
                        <phase>process-sources</phase>
                        <goals>
                            <goal>npm</goal>
                        </goals>
                        <configuration>
                            <arguments>install</arguments>
                        </configuration>
                    </execution>
                    -->
                    <!--
                    <execution>
                        <id>install node and yarn</id>
                        <phase>validate</phase>
                        <goals>
                            <goal>install-node-and-yarn</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>yarn install</id>
                        <phase>initialize</phase>
                        <goals>
                            <goal>yarn</goal>
                        </goals>
                        <configuration>
                            <arguments>install</arguments>
                        </configuration>
                    </execution>
                    -->
                    <!--
                    <execution>
                        <id>grunt prepare</id>
                        <phase>generate-resources</phase>
                        <goals>
                            <goal>grunt</goal>
                        </goals>
                        <configuration>
                            <arguments>prepare</arguments>
                        </configuration>
                    </execution>
                    <execution>
                        <id>grunt check</id>
                        <phase>compile</phase>
                        <goals>
                            <goal>grunt</goal>
                        </goals>
                        <configuration>
                            <arguments>check</arguments>
                        </configuration>
                    </execution>
                    <execution>
                        <id>grunt unit-test</id>
                        <phase>test</phase>
                        <goals>
                            <goal>grunt</goal>
                        </goals>
                        <configuration>
                            <arguments>unit-test</arguments>
                        </configuration>
                    </execution>
                    <execution>
                        <id>grunt prepare-package</id>
                        <phase>prepare-package</phase>
                        <goals>
                            <goal>grunt</goal>
                        </goals>
                        <configuration>
                            <arguments>package</arguments>
                        </configuration>
                    </execution>
                </executions>
                <configuration>
                    <nodeVersion>v${node.version}</nodeVersion>
                    <yarnVersion>v${yarn.version}</yarnVersion>
                    -->
                    <!-- <nodeDownloadRoot>http://albandrieu.com/html/download/nodejs/</nodeDownloadRoot>
                        <npmDownloadRoot>http://albandrieu.com/html/download/npm/-/</npmDownloadRoot>
                        <yarnDownloadRoot>http://albandrieu.com/html/download//yarn/</yarnDownloadRoot>   -->
                    <!--<workingDirectory>./</workingDirectory>-->
                    <!--
                    <srcdir>${basedir}/app</srcdir>
                    <outputdir>${project.build.directory}/dist</outputdir>
                    <triggerfiles>
                        <triggerfile>Gruntfile.js</triggerfile>
                        <triggerfile>package.json</triggerfile>
                    </triggerfiles>
                </configuration>
            </plugin>
            -->
            <!--
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-toolchains-plugin</artifactId>
                <version>1.1</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>toolchain</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <toolchains>
                        <jdk>
                            <version>1.8</version>
                            <vendor>oracle</vendor>
                        </jdk>
                    </toolchains>
                </configuration>
            </plugin>
            -->
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>build-helper-maven-plugin</artifactId>
                <version>${maven.build.helper.plugin.version}</version>
                <executions>
                    <execution>
                        <id>set-osgi-version</id>
                        <phase>validate</phase>
                        <goals>
                            <goal>parse-version</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-assembly-plugin</artifactId>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                        <configuration>
                            <descriptorRefs>
                                <descriptorRef>config</descriptorRef>
                            </descriptorRefs>
                            <descriptors>
                                <descriptor>src/main/assembly/web-bundle.xml</descriptor>
                            </descriptors>
                            <archive>
                                <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>
                            </archive>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.felix</groupId>
                <artifactId>maven-bundle-plugin</artifactId>
                <version>${maven.bundle.plugin.version}</version>
                <extensions>true</extensions>
                <executions>
                    <execution>
                        <id>bundle-manifest</id>
                        <phase>process-classes</phase>
                        <goals>
                            <goal>manifest</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <supportedProjectTypes>
                        <supportedProjectType>war</supportedProjectType>
                    </supportedProjectTypes>
                    <instructions>
                        <Import-Package>javax.servlet.jsp.*;version="[2.2.0,3.0)",org.eclipse.jetty.*;version="[$(version;===;${parsedVersion.osgiVersion}),$(version;==+;${parsedVersion.osgiVersion}))",*</Import-Package>
                        <Export-Package>!com.test*</Export-Package>
                        <Web-ContextPath>/</Web-ContextPath>
                        <Bundle-ClassPath>.,WEB-INF/classes</Bundle-ClassPath>
                    </instructions>
                </configuration>
            </plugin>
            <!-- also make this webapp an osgi bundle -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>${maven.war.plugin.version}</version>
                <configuration>
                    <webResources>
                        <resource>
                            <directory>dist</directory>
                        </resource>
                    </webResources>
                    <webApp>
                        <contextPath>/test</contextPath>
                    </webApp>
                    <archive>
                        <addMavenDescriptor>false</addMavenDescriptor>
                        <pomPropertiesFile>false</pomPropertiesFile>
                        <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>
                    </archive>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.pitest</groupId>
                <artifactId>pitest-maven</artifactId>
                <version>${maven.pitest.plugin.version}</version>
            </plugin>
            <!-- for automatic running of integration tests with Jetty -->
            <!-- mvn clean install org.codehaus.cargo:cargo-maven2-plugin:run -Dserver=jetty9x -->
            <plugin>
                <groupId>org.codehaus.cargo</groupId>
                <artifactId>cargo-maven2-plugin</artifactId>
                <version>${maven.cargo.maven2.plugin.version}</version>
                <configuration>
                    <skip>${maven.test.skip}</skip>
                    <wait>${cargo.wait}</wait>
                    <container>
                        <!-- 5 minutes -->
                        <timeout>300000</timeout>
                        <containerId>${cargo.container}</containerId>
                        <artifactInstaller>
                            <groupId>org.eclipse.jetty</groupId>
                            <artifactId>jetty-distribution</artifactId>
                            <version>${server.version}</version>
                        </artifactInstaller>
                        <log>${project.build.directory}/cargo.log</log>
                        <logLevel>debug</logLevel>
                        <systemProperties>
                            <!--<java.io.tmpdir>target/tmp</java.io.tmpdir>-->
                            <log4j.debug>true</log4j.debug>
                        </systemProperties>
                        <!--
                        <dependencies>
                            <dependency>
                                <groupId>org.slf4j</groupId>
                                <artifactId>slf4j-api</artifactId>
                            </dependency>
                            <dependency>
                                <groupId>org.slf4j</groupId>
                                <artifactId>slf4j-log4j12</artifactId>
                            </dependency>
                            <dependency>
                                <groupId>log4j</groupId>
                                <artifactId>log4j</artifactId>
                            </dependency>
                        </dependencies>
                        -->
                    </container>
                    <configuration>
                        <properties>
                            <cargo.protocol>${cargo.protocol}</cargo.protocol>
                            <cargo.hostname>${cargo.host}</cargo.hostname>
                            <cargo.servlet.port>${cargo.port}</cargo.servlet.port>
                            <cargo.tomcat.manager.url>${deploy.url}</cargo.tomcat.manager.url>
                            <cargo.remote.username>${cargo.remote.user}</cargo.remote.username>
                            <cargo.remote.password>${cargo.remote.password}</cargo.remote.password>
                            <cargo.logging>high</cargo.logging>
                            <cargo.start.jvmargs><![CDATA[${cargo.jmx.activation} ${jacoco.agent}]]></cargo.start.jvmargs>
                            <cargo.jetty.createContextXml>false</cargo.jetty.createContextXml>
                            <!--<cargo.server.settings>jetty9x</cargo.server.settings>-->
                        </properties>

                        <configfiles>
                            <configfile>
                                <file>${project.basedir}/src/main/config/demo-base/etc</file>
                                <todir>etc</todir>
                            </configfile>
                            <configfile>
                                <file>${project.basedir}/src/main/config/demo-base/start.d</file>
                                <todir>start.d</todir>
                            </configfile>
                            <configfile>
                                <file>${project.basedir}/src/main/config/demo-base/webapps</file>
                                <todir>webapps</todir>
                            </configfile>
                            <configfile>
                                <file>${project.basedir}/src/main/config/demo-base/start.ini</file>
                                <todir></todir>
                            </configfile>
                        </configfiles>
                        <files>
                            <configfile>
                                <file>${project.basedir}/src/main/config/demo-base/etc/keystore</file>
                                <todir>etc</todir>
                                <configfile>false</configfile>
                                <overwrite>true</overwrite>
                            </configfile>
                        </files>
                    </configuration>
                    <!--
                    <deployables>
                        <deployable>
                            <groupId>${project.groupId}</groupId>
                            <artifactId>${project.artifactId}</artifactId>
                            <type>war</type>
                            <properties>
                                <context>/test</context>
                            </properties>
                            <pingURL>${cargo.protocol}://${cargo.host}:${cargo.port}/</pingURL>
                            <pingTimeout>60000</pingTimeout>
                        </deployable>
                    </deployables>
                    -->
                </configuration>
            </plugin>
            <!-- launch mvn clean install jetty:run-war -->
            <plugin>
                <groupId>org.eclipse.jetty</groupId>
                <artifactId>jetty-maven-plugin</artifactId>
                <version>${maven.jetty.eclipse.plugin.version}</version>
                <dependencies>
                    <dependency>
                        <groupId>org.eclipse.jetty</groupId>
                        <artifactId>jetty-client</artifactId>
                        <version>${jetty.version}</version>
                    </dependency>
                    <dependency>
                        <groupId>org.eclipse.jetty</groupId>
                        <artifactId>jetty-servlets</artifactId>
                        <version>${jetty.version}</version>
                    </dependency>
                    <dependency>
                        <groupId>org.eclipse.jetty</groupId>
                        <artifactId>jetty-util</artifactId>
                        <version>${jetty.version}</version>
                    </dependency>
                    <dependency>
                        <groupId>org.eclipse.jetty</groupId>
                        <artifactId>jetty-http</artifactId>
                        <version>${jetty.version}</version>
                    </dependency>
                    <dependency>
                        <groupId>org.eclipse.jetty</groupId>
                        <artifactId>jetty-rewrite</artifactId>
                        <version>${jetty.version}</version>
                    </dependency>
                </dependencies>
                <configuration>
                    <scanIntervalSeconds>10</scanIntervalSeconds>
                    <!-- TODO <jettyConfig>src/main/etc/jetty.xml</jettyConfig> -->
                    <httpConnector>
                        <!--host>localhost</host -->
                        <port>${jetty.port}</port>
                    </httpConnector>
                    <stopPort>${jetty.stop.port}</stopPort>
                    <stopKey>STOP</stopKey>
                    <!--
                    <systemProperties>
                        <systemProperty>
                            <name>fooprop</name>
                            <value>222</value>
                        </systemProperty>
                    </systemProperties>
                    -->
                    <webApp>
                        <contextPath>/test</contextPath>
                        <tempDirectory>${project.build.directory}/work</tempDirectory>
                        <!--
                        <sessionHandler implementation="org.eclipse.jetty.server.session.SessionHandler">
                            <sessionManager implementation="org.eclipse.jetty.server.session.HashSessionManager">
                                <storeDirectory>${basedir}/target/sessions</storeDirectory>
                            </sessionManager>
                        </sessionHandler>
                        -->
                    </webApp>
                </configuration>
            </plugin>
            <!-- Allow this web application to be started with the command : 'mvn
                tomcat7:run' -->
            <plugin>
                <groupId>org.apache.tomcat.maven</groupId>
                <artifactId>tomcat7-maven-plugin</artifactId>
                <version>${maven.tomcat7.plugin.version}</version>
                <dependencies>
                    <dependency>
                        <groupId>${project.groupId}</groupId>
                        <artifactId>${project.artifactId}</artifactId>
                        <version>${project.version}</version>
                        <type>war</type>
                    </dependency>
                    <!--
                    <dependency>
                        <groupId>${jdbc.groupId}</groupId>
                        <artifactId>${jdbc.client.artifactId}</artifactId>
                        <version>${jdbc.version}</version>
                        <scope>runtime</scope>
                    </dependency>
                    -->
                </dependencies>
                <configuration>
                    <!-- http port -->
                    <port>${tomcat.port}</port>
                    <path>/test</path>
                    <!--<contextFile>${basedir}/src/main/webapp/META-INF/context.xml</contextFile> -->
                    <addWarDependenciesInClassloader>true</addWarDependenciesInClassloader>
                    <!--
            <systemProperties>
                <java.security.auth.login.config>${basedir}/conf/jaas.config</java.security.auth.login.config>
            </systemProperties>
            -->
                    <url>${deploy.url}</url>
                    <username>${cargo.remote.user}</username>
                    <password>${cargo.remote.password}</password>
                    <addContextWarDependencies>true</addContextWarDependencies>
                    <addWarDependenciesInClassloader>true</addWarDependenciesInClassloader>
                    <!--<configurationDir>${basedir}</configurationDir> -->
                    <!--<server>nabla-tomcat</server> -->
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-resources-plugin</artifactId>
                <version>${maven.resources.plugin.version}</version> <!--$NO-MVN-MAN-VER$ -->
                <executions>
                    <execution>
                        <id>copy-files-on-build</id>
                        <phase>validate</phase>
                        <goals>
                            <goal>copy-resources</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${project.build.directory}/${project.build.finalName}/bower_components</outputDirectory>
                            <resources>
                                <resource>
                                    <!--<directory>${basedir}/bower_components/</directory>-->
                                    <directory>bower_components</directory>
                                    <!--<include>*.[MIME-TYPE]</include>-->
                                    <filtering>false</filtering>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <!--
            <plugin>
                <groupId>com.sinapsi.memtracker</groupId>
                <artifactId>mem-tracker-maven-plugin</artifactId>
                <version>${maven.mem.tracker.maven.plugin.version}</version>
                <executions>
                    <execution>
                        <id>integration-test</id>
                        <phase>integration-test</phase>
                        <goals>
                            <goal>track</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <port>${cargo.monitoring.jmx.rmi.port}</port>
                </configuration>
            </plugin>
            -->
            <!-- groovydoc 
            <plugin>
                <groupId>org.codehaus.gmavenplus</groupId>
                <artifactId>gmavenplus-plugin</artifactId>
                <version>${maven.gmavenplus.plugin.version}</version>
                <executions>
                    <execution>
                        <phase>prepare-package</phase>
                        <goals>
                            <goal>groovydoc</goal>
                        </goals>
                    </execution>
                </executions>
                <dependencies>
                    <dependency>
                        <groupId>org.codehaus.groovy</groupId>
                        <artifactId>groovy-all</artifactId>
                        <version>${groovy.version}</version>
                        <scope>runtime</scope>
                    </dependency>
                </dependencies>
                <configuration>
                    <groovydocJavaSources>false</groovydocJavaSources>
                    <groovydocOutputDirectory>${documentation.output.directory}/${groovydoc.directory.name}</groovydocOutputDirectory>
                    <testGroovyDocOutputDirectory>${project.basedir}/target/site/testgapidocs</testGroovyDocOutputDirectory>
                </configuration>
            </plugin>
            -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>${maven.dependency.plugin.version}</version> <!--$NO-MVN-MAN-VER$ -->
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <configuration>
                            <artifactItems>
                                <artifactItem>
                                    <groupId>org.eclipse.jetty</groupId>
                                    <artifactId>jetty-runner</artifactId>
                                    <version>${jetty.runner.version}</version>
                                    <destFileName>jetty-runner.jar</destFileName>
                                </artifactItem>
                            </artifactItems>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-shade-plugin</artifactId>
                <version>${maven.shade.plugin.version}</version>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>shade</goal>
                        </goals>
                        <configuration>
                            <transformers>
                                <transformer implementation="org.apache.maven.plugins.shade.resource.ServicesResourceTransformer"></transformer>
                                <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                                    <manifestEntries>
                                        <Main-Class>com.test.project.sample.App</Main-Class>
                                    </manifestEntries>
                                </transformer>
                            </transformers>
                        </configuration>
                    </execution>
                </executions>
                <configuration>
                    <createDependencyReducedPom>true</createDependencyReducedPom>
                    <filters>
                        <filter>
                            <artifact>*:*</artifact>
                            <excludes>
                                <exclude>META-INF/*.SF</exclude>
                                <exclude>META-INF/*.DSA</exclude>
                                <exclude>META-INF/*.RSA</exclude>
                            </excludes>
                        </filter>
                    </filters>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-antrun-plugin</artifactId>
                <executions>
                    <execution>
                        <id>lcovFileForSonar</id>
                        <phase>package</phase>
                        <goals>
                            <goal>run</goal>
                        </goals>
                        <configuration>
                            <target>
                                <echo message="Copying LCOV file lcov-karma.info for Sonar purpose to target directory"></echo>
                                <copy flatten="true" todir="${basedir}/target">
                                    <fileset dir="${basedir}/target">
                                        <include name="karma-coverage/lcov-karma.info"></include>
                                    </fileset>
                                </copy>
                                <!--
                                <path id="sourceDirectory.path">
                                    <pathelement location="${basedir}/app/scripts" />
                                </path>
                                <pathconvert targetos="unix" property="relativeSourceDirectory" refid="sourceDirectory.path">
                                    <map from="${basedir}/" to="" />
                                </pathconvert>
                                <echo message="Base dir: ${basedir} " />
                                <echo message="Source directory: ${project.build.sourceDirectory}" />
                                <echo message="Relative source directory: ${relativeSourceDirectory}" />
                                <echo message="Fixing a problem with a path to the JavaScript path" />
                                <replaceregexp byline="true">
                                    <regexp pattern="SF:\./todo/(.*)" />
                                    <substitution expression="SF:${relativeSourceDirectory}/\1" />
                                    <fileset dir="target">
                                        <include name="lcov-karma.info" />
                                    </fileset>
                                </replaceregexp>
                                -->
                            </target>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.sonatype.plugins</groupId>
                <artifactId>nexus-staging-maven-plugin</artifactId>
                <version>${maven.nexus.staging.plugin.version}</version>
                <extensions>true</extensions>
                <configuration>
                    <!-- The Base URL of Nexus instance where we want to stage -->
                    <!--<nexusUrl>http://albandri:8081/nexus/</nexusUrl> -->
                    <!-- The server "id" element from settings to use authentication from -->
                    <serverId>local-nexus</serverId>
                    <skipNexusStagingDeployMojo>true</skipNexusStagingDeployMojo>
                    <skipStaging>true</skipStaging>
                </configuration>
            </plugin>
            <!-- mvn jenkinsfile:validate -->
            <plugin>
                <groupId>com.andyserver.maven.plugins</groupId>
                <artifactId>jenkinsfile-maven-plugin</artifactId>
                <version>${maven.jenkinsfile.plugin.version}</version>
                <configuration>
                    <server>${env.JENKINS_URL}</server>
                    <username>${env.JENKINS_USER}</username>
                    <password>${env.JENKINS_USER_TOKEN}</password>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <profiles>
        <profile>
            <id>obfuscation-DISABLED</id>
            <!--
            <activation>
                <property>
                    <name>!profile.activation</name>
                </property>
            </activation>
            -->
            <dependencies>
                <dependency> <!-- for the obfuscator -->
                    <groupId>javax.servlet</groupId>
                    <artifactId>jsp-api</artifactId>
                    <version>${javax.jsp.api.version}</version>
                    <scope>provided</scope>
                </dependency>
                <dependency> <!-- for the obfuscator -->
                    <groupId>org.apache.ant</groupId>
                    <artifactId>ant</artifactId>
                    <version>${ant.version}</version>
                    <scope>provided</scope>
                </dependency>
            </dependencies>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-dependency-plugin</artifactId>
                        <version>${maven.dependency.plugin.version}</version> <!--$NO-MVN-MAN-VER$ -->
                        <executions>
                            <!-- added for obfuscation tool to find lib -->
                            <execution>
                                <id>copy-dependencies</id>
                                <phase>package</phase>
                                <goals>
                                    <goal>copy-dependencies</goal>
                                </goals>
                                <configuration>
                                    <outputDirectory>target/lib</outputDirectory>
                                    <!--<excludeArtifactIds>spring-boot-devtools,junit</excludeArtifactIds> -->
                                    <overWriteSnapshots>true</overWriteSnapshots>
                                    <includeScope></includeScope>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <plugin>
                        <groupId>com.zelix.plugins</groupId>
                        <artifactId>zkm-plugin</artifactId>
                        <version>${maven.zkm.plugin.version}</version>
                        <dependencies>
                            <dependency>
                                <groupId>com.finastra.plugins</groupId>
                                <artifactId>zkm</artifactId>
                                <version>${maven.zkm.version}</version>
                                <!-- <scope>system</scope> <systemPath>${ZKM_HOME}/ZKM.jar</systemPath> -->
                            </dependency>
                        </dependencies>
                        <executions>
                            <execution>
                                <phase>package</phase>
                                <goals>
                                    <goal>obfuscate</goal>
                                </goals>
                            </execution>
                        </executions>
                        <configuration>
                            <!-- Will be used to inject values into the plugin but will not be
                                in project properties -->
                            <isSkip>false</isSkip>
                            <isVerbose>true</isVerbose>
                            <isParseOnly>false</isParseOnly>
                            <scriptFile>zkm.txt</scriptFile>
                            <classpathLibs>
                                <lib>${java.home}/jre/lib/rt.jar</lib>
                                <!-- <lib>D:\Java\apache-ant-1.9.2\lib\ant.jar</lib> -->
                            </classpathLibs>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>javafx</id>
            <dependencies>
                <dependency>
                  <groupId>com.oracle</groupId>
                  <artifactId>javafx</artifactId>
                  <version>${com.oracle.javafx.version}</version>
                  <scope>system</scope>
                  <systemPath>${project.basedir}/lib/jfxrt.jar</systemPath>
                  <optional>true</optional>
                </dependency>
            </dependencies>
            <build>
                <plugins>
                    <!-- mvn clean install jfx:native -Pjavafx -->
                    <plugin>
                        <groupId>com.zenjava</groupId>
                        <artifactId>javafx-maven-plugin</artifactId>
                        <version>${maven.javafx.plugin.version}</version>
                        <configuration>
                            <mainClass>com.almonde.WSEntryPoint</mainClass>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>env.JAVA_HOME.default</id>
            <activation>
                <property>
                    <name>!env.JAVA_HOME</name>
                </property>
            </activation>
            <properties>
                <env.JAVA_HOME>/usr/lib/jvm/java-1.8.0-openjdk-amd64</env.JAVA_HOME>
                <java.home>/usr/lib/jvm/java-1.8.0-openjdk-amd64</java.home>
            </properties>
        </profile>
        <profile>
            <id>env.KEYSTORE.default</id>
            <activation>
                <property>
                    <name>!env.KEYSTORE</name>
                </property>
            </activation>
            <properties>
                <!-- keytool -list -keystore $JAVA_HOME/jre/lib/security/cacerts -v -->
                <env.KEYSTORE>${java.home}/jre/lib/security/cacerts</env.KEYSTORE>
            </properties>
        </profile>
        <!--
        <profile>
            <id>env.STOREPASS.default</id>
            <activation>
                <property>
                    <name>!env.STOREPASS</name>
                </property>
            </activation>
            <properties>
                <env.STOREPASS>{XiDq7l+KqFIHGOjOS2YJ+aZn+/VDNkepsecgIHQvW0U=}</env.STOREPASS>
            </properties>
        </profile>
        -->
        <profile>
            <id>env.ALIAS.default</id>
            <activation>
                <property>
                    <name>!env.ALIAS</name>
                </property>
            </activation>
            <properties>
                <env.ALIAS>test</env.ALIAS>
            </properties>
        </profile>
        <profile>
            <id>signing</id>
            <!--
            <activation>
                <property>
                    <name>!profile.activation</name>
                </property>
            </activation>
            -->
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-jarsigner-plugin</artifactId>
                        <version>${maven.jarsigner.plugin.version}</version>
                        <executions>
                            <execution>
                                <id>sign</id>
                                <goals>
                                    <goal>sign</goal>
                                </goals>
                            </execution>
                            <execution>
                                <id>verify</id>
                                <goals>
                                    <goal>verify</goal>
                                </goals>
                            </execution>
                        </executions>
                        <configuration>
                            <!--<removeExistingSignatures>true</removeExistingSignatures>-->
                            <keystore>${env.KEYSTORE}</keystore>
                            <alias>${env.ALIAS}</alias>
                            <storepass>${env.STOREPASS}</storepass>
                            <!--<verbose>true</verbose>-->
                            <certs>true</certs>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>config</id>
            <activation>
                <file>
                    <exists>src/main/config</exists>
                </file>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-assembly-plugin</artifactId>
                        <executions>
                            <execution>
                                <phase>package</phase>
                                <goals>
                                    <goal>single</goal>
                                </goals>
                                <configuration>
                                    <descriptorRefs>
                                        <descriptorRef>config</descriptorRef>
                                    </descriptorRefs>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>sonar</id>
            <activation>
                <property>
                    <name>!profile.activation</name>
                </property>
            </activation>
            <properties>
                <sonar.sources>src/main,app</sonar.sources>
                <sonar.tests>src/test,test</sonar.tests>
            </properties>
        </profile>
        <profile>
            <id>docker</id>
            <!--
            <modules>
                <module>docker</module>
            </modules>
            -->
            <activation>
                <property>
                    <name>docker</name>
                </property>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>io.fabric8</groupId>
                        <artifactId>docker-maven-plugin</artifactId>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>run-integration-test</id>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.cargo</groupId>
                        <artifactId>cargo-maven2-plugin</artifactId>
                        <version>${maven.cargo.maven2.plugin.version}</version>
                        <inherited>true</inherited>
                        <executions>
                            <execution>
                                <id>start-container-integration-test</id>
                                <phase>pre-integration-test</phase>
                                <goals>
                                    <goal>start</goal>
                                </goals>
                                <configuration>
                                    <timeout>240000</timeout>
                                </configuration>
                            </execution>
                            <execution>
                                <id>stop-container-integration-test</id>
                                <phase>post-integration-test</phase>
                                <goals>
                                    <goal>stop</goal>
                                </goals>
                            </execution>
                        </executions>
                        <configuration>
                            <properties>
                                <cargo.tomcat.manager.url>${deploy.url}</cargo.tomcat.manager.url>
                                <cargo.remote.username>${cargo.remote.user}</cargo.remote.username>
                                <cargo.remote.password>${cargo.remote.password}</cargo.remote.password>
                                <cargo.logging>high</cargo.logging>
                                <!-- <cargo.start.jvmargs><![CDATA[${jacoco.agent} ${cargo.jmx.activation}]]></cargo.start.jvmargs> -->
                                <!-- -agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=5005 -->
                                <cargo.jetty.createContextXml>false</cargo.jetty.createContextXml>
                            </properties>
                            <!--
                            <container>
                                <timeout>300000</timeout>
                                <containerId>${cargo.container}</containerId>
                                <artifactInstaller>
                                    <groupId>org.eclipse.jetty</groupId>
                                    <artifactId>jetty-distribution</artifactId>
                                    <version>${server.version}</version>
                                </artifactInstaller>
                            </container>
                            -->
                            <configuration>
                                <type>${cargo.configuration.type}</type>
                                <properties>
                                    <cargo.hostname>${cargo.host}</cargo.hostname>
                                    <cargo.servlet.port>${cargo.port}</cargo.servlet.port>
                                    <cargo.logging>high</cargo.logging>
                                </properties>
                            </configuration>
                        </configuration>
                    </plugin>
                    <!-- DISABLE because it is too slow
                    <plugin>
                        <groupId>org.owasp</groupId>
                        <artifactId>dependency-check-maven</artifactId>
                        <version>${maven.dependency.check.plugin.version}</version>
                        <executions>
                            <execution>
                                <phase>compile</phase>
                                <goals>
                                    <goal>check</goal>
                                </goals>
                            </execution>
                        </executions>
                        <configuration>
                            <format>XML</format>
                            <skipProvidedScope>true</skipProvidedScope>
                            <skipRuntimeScope>true</skipRuntimeScope>
                            <skipSystemScope>true</skipSystemScope>
                            <assemblyAnalyzerEnabled>false</assemblyAnalyzerEnabled>
                            -->
                            <!--
                            <cveUrl12Modified>http://albandrieu.com/download/nist/nvdcve-Modified.xml.gz</cveUrl12Modified>
                            <cveUrl20Modified>http://albandrieu.com/download/nist/nvdcve-2.0-Modified.xml.gz</cveUrl20Modified>
                            <cveUrl12Base>http://albandrieu.com/download/nist/nvdcve-%d.xml</cveUrl12Base>
                            <cveUrl20Base>http://albandrieu.com/download/nist/nvdcve-2.0-%d.xml</cveUrl20Base>
                            -->
                            <!--
                        </configuration>
                    </plugin>
                    -->
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>exec-maven-plugin</artifactId>
                        <version>${maven.exec.plugin.version}</version>
                        <executions>
                            <execution>
                                <id>exec-grunt-integration-test</id>
                                <phase>integration-test</phase>
                                <configuration>
                                    <executable>grunt</executable>
                                    <arguments>
                                        <argument>integration-test</argument>
                                    </arguments>
                                </configuration>
                                <goals>
                                    <goal>exec</goal>
                                </goals>
                            </execution>
                        </executions>
                        <configuration>
                            <skip>${maven.exec.skip}</skip>
                            <environmentVariables>
                                <NPM_CONFIG_PREFIX>${basedir}/npm</NPM_CONFIG_PREFIX>
                                <NPM_CONFIG_CACHE>${NPM_CONFIG_PREFIX}/cache</NPM_CONFIG_CACHE>
                                <NPM_CONFIG_TMP>${project.build.directory}/npmtmp</NPM_CONFIG_TMP>
                            </environmentVariables>
                        </configuration>
                    </plugin>
                    <!--
                    <plugin>
                        <groupId>com.github.eirslett</groupId>
                        <artifactId>frontend-maven-plugin</artifactId>
                        <version>${maven.frontend.plugin.version}</version>
                        <executions>
                            <execution>
                                <id>grunt integration-test</id>
                                <phase>integration-test</phase>
                                <goals>
                                    <goal>grunt</goal>
                                </goals>
                                <configuration>
                                    <arguments>integration-test</arguments>
                                </configuration>
                            </execution>
                        </executions>
                        <configuration>
                            <nodeVersion>${node.version}</nodeVersion>
                            <yarnVersion>v${yarn.version}</yarnVersion>
                            <workingDirectory>./</workingDirectory>
                        </configuration>
                    </plugin>
                    -->
                </plugins>
            </build>
        </profile>
        <profile>
            <id>jetty9x</id>
            <activation>
                <property>
                    <name>server</name>
                    <value>jetty9x</value>
                    <!-- <name>!server</name> -->
                </property>
            </activation>
            <dependencies>
                <!-- http://blog.anvard.org/articles/2013/10/06/jetty-proxy-servlet.html -->
                <!-- https://github.com/mdeimel/jetty-proxy -->
                <dependency>
                    <groupId>org.eclipse.jetty</groupId>
                    <artifactId>jetty-proxy</artifactId>
                    <version>${jetty.version}</version>
                    <scope>compile</scope>
                </dependency>
                <dependency>
                    <groupId>org.eclipse.jetty</groupId>
                    <artifactId>jetty-http</artifactId>
                    <version>${jetty.version}</version>
                    <type>jar</type>
                    <scope>runtime</scope>
                </dependency>
                <dependency>
                    <groupId>org.eclipse.jetty</groupId>
                    <artifactId>jetty-rewrite</artifactId>
                    <version>${jetty.version}</version>
                    <type>jar</type>
                    <scope>runtime</scope>
                </dependency>
                <dependency>
                    <groupId>org.eclipse.jetty</groupId>
                    <artifactId>jetty-server</artifactId>
                    <version>${jetty.version}</version>
                </dependency>
                <dependency>
                    <groupId>org.eclipse.jetty</groupId>
                    <artifactId>jetty-servlet</artifactId>
                    <version>${jetty.version}</version>
                </dependency>
                <dependency>
                    <groupId>org.eclipse.jetty</groupId>
                    <artifactId>jetty-continuation</artifactId>
                    <version>${jetty.version}</version>
                </dependency>
                <dependency>
                    <groupId>org.eclipse.jetty</groupId>
                    <artifactId>jetty-util</artifactId>
                    <version>${jetty.version}</version>
                </dependency>
                <dependency>
                    <groupId>org.eclipse.jetty</groupId>
                    <artifactId>jetty-servlets</artifactId>
                    <version>${jetty.version}</version>
                    <type>jar</type>
                    <scope>runtime</scope>
                </dependency>
            </dependencies>
            <properties>
                <server.home></server.home>
                <jetty.version>${jetty9.version}</jetty.version>
                <server.version>${jetty.version}</server.version>
                <server.name>${product.name}</server.name>
                <server.port></server.port>
                <datasource>${datasource.name}</datasource>
                <cargo.container>jetty9x</cargo.container>
                <cargo.container.home>${project.build.directory}/jetty</cargo.container.home>
                <!--<cargo.container.url>TODOjetty9</cargo.container.url> -->
                <cargo.container.type>installed</cargo.container.type>
                <cargo.configuration.type>standalone</cargo.configuration.type>
                <cargo.deployables.type></cargo.deployables.type>
                <cargo.port>${jetty.port}</cargo.port>
                <cargo.jmx.activation>${cargo.jetty.jmx.activation}</cargo.jmx.activation>
                <scope.type>${scope.compile}</scope.type>
                <scope.tomcat.only.type>${scope.compile}</scope.tomcat.only.type>
                <scope.tomcat.never.type>${scope.provided}</scope.tomcat.never.type>
            </properties>
        </profile>
        <profile>
            <id>logback</id>
            <dependencies>
                <dependency>
                    <groupId>ch.qos.logback</groupId>
                    <artifactId>logback-classic</artifactId>
                    <version>${logback.version}</version> <!--$NO-MVN-MAN-VER$-->
                    <scope>runtime</scope>
                    <exclusions>
                        <!-- circular dependency -->
                        <exclusion>
                            <artifactId>slf4j-api</artifactId>
                            <groupId>org.slf4j</groupId>
                        </exclusion>
                    </exclusions>
                </dependency>
                <dependency>
                    <groupId>ch.qos.logback</groupId>
                    <artifactId>logback-core</artifactId>
                    <version>${logback.version}</version>
                    <scope>runtime</scope>
                </dependency>
            </dependencies>
        </profile>
        <profile>
            <id>log4j</id>
            <activation>
                <property>
                    <name>!profile.activation</name>
                </property>
            </activation>
            <dependencies>
                <dependency>
                    <groupId>org.slf4j</groupId>
                    <artifactId>slf4j-log4j12</artifactId>
                    <version>${slf4j.version}</version> <!--$NO-MVN-MAN-VER$-->
                    <scope>runtime</scope>
                    <exclusions>
                        <!-- circular dependency -->
                        <exclusion>
                            <artifactId>slf4j-api</artifactId>
                            <groupId>org.slf4j</groupId>
                        </exclusion>
                    </exclusions>
                </dependency>
				<dependency>
					<groupId>org.apache.logging.log4j</groupId>
					<artifactId>log4j-core</artifactId>
					<version>${log4j.core.version}</version>
					<scope>runtime</scope>
				</dependency>
            </dependencies>
        </profile>
    </profiles>
</project>
